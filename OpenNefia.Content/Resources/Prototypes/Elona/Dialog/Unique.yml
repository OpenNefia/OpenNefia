---
- type: Elona.Dialog
  id: Elona.PartTimeWorker
- type: Elona.Dialog
  id: Elona.Pael
- type: Elona.Dialog
  id: Elona.Orphe
- type: Elona.Dialog
  id: Elona.Poppy
- type: Elona.Dialog
  id: Elona.Renton
- type: Elona.Dialog
  id: Elona.Raphael
- type: Elona.Dialog
  id: Elona.Rilian
- type: Elona.Dialog
  id: Elona.RogueBoss
- type: Elona.Dialog
  id: Elona.Noel
- type: Elona.Dialog
  id: Elona.Miches

- type: Elona.Dialog
  id: Elona.Lomias
  scriptImports:
  - OpenNefia.Content.Prototypes
  - OpenNefia.Content.Items
  - OpenNefia.Content.Identify
  - OpenNefia.Content.CurseStates
  scriptDependencies:
    _gameSession: OpenNefia.Core.Game.IGameSessionManager
    _entityManager: OpenNefia.Core.GameObjects.IEntityManager
    _sidequests: OpenNefia.Content.Sidequests.ISidequestSystem
    _charaGen: OpenNefia.Content.RandomGen.ICharaGen
    _itemGen: OpenNefia.Content.RandomGen.IItemGen
    _mes: OpenNefia.Content.Logic.IMessagesManager
  nodes:
    __start__: !type:DialogBranchNode
      conditions:
      - condition: !type:SidequestStateCondition
          sidequestID: Elona.Tutorial
        value: 0
        node: Elona.Lomias:Tutorial0
      - condition: !type:SidequestStateCondition
          sidequestID: Elona.Tutorial
        value: 1
        node: Elona.Lomias:Tutorial1
      - condition: !type:SidequestStateCondition
          sidequestID: Elona.Tutorial
        value: 2
        node: Elona.Lomias:Tutorial2
      - condition: !type:SidequestStateCondition
          sidequestID: Elona.Tutorial
        value: 3
        node: Elona.Lomias:Tutorial3
      - condition: !type:SidequestStateCondition
          sidequestID: Elona.Tutorial
        value: 4
        node: Elona.Lomias:Tutorial4
      - condition: !type:SidequestStateCondition
          sidequestID: Elona.Tutorial
        value: 5
        node: Elona.Lomias:Tutorial5
      - condition: !type:SidequestStateCondition
          sidequestID: Elona.Tutorial
        value: 6
        node: Elona.Lomias:Tutorial6
      - condition: !type:SidequestStateCondition
          sidequestID: Elona.Tutorial
        value: 7
        node: Elona.Lomias:Tutorial7
      - condition: !type:SidequestStateCondition
          sidequestID: Elona.Tutorial
        value: 8
        node: Elona.Lomias:Tutorial8
      - condition: !type:SidequestStateCondition
          sidequestID: Elona.Tutorial
        value: 99
        node: Elona.Lomias:Tutorial99
      - condition: !type:SidequestStateCondition
          sidequestID: Elona.Tutorial
        value: -1
        node: Elona.Lomias:TutorialAfter

    Tutorial0: !type:DialogTextNode
      texts:
      - Elona.Dialog.Unique.Lomias.Tutorial0.Text
      choices:
      - text: Elona.Dialog.Unique.Lomias.Tutorial0.Choices.Yes
        nextNode: Elona.Lomias:Tutorial0_Start
      - text: Elona.Dialog.Unique.Lomias.Tutorial0.Choices.No
        isDefault: true
      - text: Elona.Dialog.Unique.Lomias.TutorialAfter.Choices.GetOut
        nextNode: Elona.Lomias:GetOut
    Tutorial0_Start: !type:DialogTextNode
      texts:
      - Elona.Dialog.Unique.Lomias.Tutorial0_Start.Text
      choices:
      - text: Elona.Dialog.Common.Choices.More
        nextNode: Elona.Lomias:__start__
      afterEnter: |
        var corpse = _itemGen.GenerateItem(_gameSession.Player, Protos.Item.Corpse);
        if (_entityManager.IsAlive(corpse))
        {
            var protoSource = _entityManager.EnsureComponent<EntityProtoSourceComponent>(corpse.Value);
            protoSource.EntityID = Protos.Chara.Beggar;
            _entityManager.EnsureComponent<IdentifyComponent>(corpse.Value).IdentifyState = IdentifyState.Full;
            _mes.Display(Loc.GetString("Elona.Common.SomethingIsPut"));
        }
        _sidequests.SetState(Protos.Sidequest.Tutorial, 1);

    Tutorial1: !type:DialogTextNode
      texts:
      - Elona.Dialog.Unique.Lomias.Tutorial1.Text
      choices:
      - text: Elona.Dialog.Unique.Lomias.Tutorial1.Choices.Alright
        isDefault: true
      - text: Elona.Dialog.Unique.Lomias.Tutorial1.Choices.Ate
        nextNode: Elona.Lomias:Tutorial1_Ate1
    Tutorial1_Ate1: !type:DialogTextNode
      texts:
      - Elona.Dialog.Unique.Lomias.Tutorial1_Ate1.Text
      choices:
      - text: Elona.Dialog.Unique.Lomias.Tutorial1_Ate1.Choices.What
        nextNode: Elona.Lomias:Tutorial1_Ate2
    Tutorial1_Ate2: !type:DialogTextNode
      texts:
      - Elona.Dialog.Unique.Lomias.Tutorial1_Ate2.Text
      choices:
      - text: Elona.Dialog.Common.Choices.More
        nextNode: Elona.Lomias:__start__
      afterEnter: |
        _sidequests.SetState(Protos.Sidequest.Tutorial, 2);

    Tutorial2: !type:DialogTextNode
      texts:
      - Elona.Dialog.Common.IsSleeping
    Tutorial3: !type:DialogTextNode
      texts:
      - Elona.Dialog.Common.IsSleeping
    Tutorial4: !type:DialogTextNode
      texts:
      - Elona.Dialog.Common.IsSleeping
    Tutorial5: !type:DialogTextNode
      texts:
      - Elona.Dialog.Common.IsSleeping
    Tutorial6: !type:DialogTextNode
      texts:
      - Elona.Dialog.Common.IsSleeping
    Tutorial7: !type:DialogTextNode
      texts:
      - Elona.Dialog.Common.IsSleeping
    Tutorial8: !type:DialogTextNode
      texts:
      - Elona.Dialog.Common.IsSleeping
    Tutorial99: !type:DialogTextNode
      texts:
      - Elona.Dialog.Common.IsSleeping

    TutorialAfter: !type:DialogTextNode
      texts:
      - Elona.Dialog.Common.IsSleeping

    GetOut: !type:DialogTextNode
      texts:
      - Elona.Dialog.Common.IsSleeping

- type: Elona.Dialog
  id: Elona.LomiasNewGame
  nodes:
    __start__: !type:DialogJumpNode
      nextNode: Elona.Lomias:__start__

- type: Elona.Dialog
  id: Elona.Miral
- type: Elona.Dialog
  id: Elona.Loyter
- type: Elona.Dialog
  id: Elona.Mia
- type: Elona.Dialog
  id: Elona.Marks
- type: Elona.Dialog
  id: Elona.Lily
- type: Elona.Dialog
  id: Elona.Shena
- type: Elona.Dialog
  id: Elona.Stersha
- type: Elona.Dialog
  id: Elona.QuestHarvest
- type: Elona.Dialog
  id: Elona.QuestEscort
- type: Elona.Dialog
  id: Elona.QuestDeliver
- type: Elona.Dialog
  id: Elona.QuestHuntex
- type: Elona.Dialog
  id: Elona.QuestParty
- type: Elona.Dialog
  id: Elona.QuestHunt
- type: Elona.Dialog
  id: Elona.Slan
- type: Elona.Dialog
  id: Elona.QuestCook
- type: Elona.Dialog
  id: Elona.QuestCollect
- type: Elona.Dialog
  id: Elona.Tam
- type: Elona.Dialog
  id: Elona.StrangeScientist
- type: Elona.Dialog
  id: Elona.QuestConquer
- type: Elona.Dialog
  id: Elona.WhomDwellInTheVanity
- type: Elona.Dialog
  id: Elona.Zeome
- type: Elona.Dialog
  id: Elona.Xabi
- type: Elona.Dialog
  id: Elona.QuestSupply
- type: Elona.Dialog
  id: Elona.Lexus
- type: Elona.Dialog
  id: Elona.Karam
- type: Elona.Dialog
  id: Elona.Larnneire
- type: Elona.Dialog
  id: Elona.GuestCitizen
- type: Elona.Dialog
  id: Elona.GuestBeggar
- type: Elona.Dialog
  id: Elona.Garokk
- type: Elona.Dialog
  id: Elona.Erystia
- type: Elona.Dialog
  id: Elona.Doria
- type: Elona.Dialog
  id: Elona.Gilbert
- type: Elona.Dialog
  id: Elona.KanedaBike
- type: Elona.Dialog
  id: Elona.Icolle
- type: Elona.Dialog
  id: Elona.GuestTrainer
- type: Elona.Dialog
  id: Elona.Conery
- type: Elona.Dialog
  id: Elona.Arnord
- type: Elona.Dialog
  id: Elona.GuestProducer
- type: Elona.Dialog
  id: Elona.GuestPunk
- type: Elona.Dialog
  id: Elona.Balzak
- type: Elona.Dialog
  id: Elona.GuestMerchant
- type: Elona.Dialog
  id: Elona.Ainc
- type: Elona.Dialog
  id: Elona.Abyss
- type: Elona.Dialog
  id: Elona.WanderingMerchant
...
